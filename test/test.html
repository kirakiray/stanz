<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>stanz test</title>
    <!-- <script src="../dist/stanz-dev.js"></script> -->
    <!-- <script src="../dist/stanz.js"></script> -->
    <script type="module">
      import stanz from "../src/base.mjs";

      const d = stanz([
        { val: "I am v0" },
        { val: "I am v1" },
        { val: "I am v2" },
        { val: "I am v3", arr: [{ val: "v3 sub 0" }, { val: "v3 sub 1" }] },
        [{ val: "I am v4 sub1" }, { val: "I am v4 sub2" }],
      ]);

      let i = 0;
      d.watch((e) => {
        // expect(e.type).toBe("array");

        

        i++;
        // if (i === 1) {
        //   expect(e.args).toEqual([{ val: "v3 after push" }]);
        //   expect(e.path.length).toBe(2);
        // } else if (i === 2) {
        //   expect(e.args).toEqual([{ val: "v4 after push" }]);
        //   expect(e.path.length).toBe(1);
        // } else if (i === 3) {
        //   expect(e.args).toEqual([{ val: "I am v5" }]);
        //   expect(e.path.length).toBe(0);
        // }
      });

      d[3].arr.push({
        val: "v3 after push",
      });

      d[3].push({
        val: "v4 after push",
      });

      d.push({
        val: "I am v5",
      });

      expect(i).toBe(3);

      window.d = d;
    </script>
  </head>
  <body>
    This is the html file for development and debugging
  </body>
</html>
